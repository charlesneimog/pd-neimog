#N canvas 963 23 951 1016 10;
#X declare -lib pd-neimog;
#N canvas 343 184 494 344 META 0;
#X text 12 157 HELP_PATCH_AUTHORS "pd meta" information added by Jonathan Wilkes for Pd version 0.42.;
#X text 12 25 LICENSE GPL v2;
#X text 12 5 KEYWORDS kalman filter;
#X text 12 45 DESCRIPTION simple linear one-dimensional kalman filter;
#X text 12 65 INLET_0 float analyze mean noise iterations init;
#X text 12 137 AUTHOR Joel Matthys;
#X text 12 81 OUTLET_0 float filtered output;
#X text 13 98 OUTLET_1 float potential noise in output;
#X restore 623 277 pd META;
#N canvas 0 0 450 300 (subpatch) 0;
#X array original 200 float 0;
#X coords 0 1 199 -1 200 140 1 0 0;
#X restore 470 -57 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array filtered 200 float 0;
#X coords 0 1 199 -1 200 140 1 0 0;
#X restore 469 122 graph;
#X obj 284 -24 metro 50;
#X obj 284 -45 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#N canvas 854 251 208 252 noisy-sample-data 0;
#X floatatom 25 119 5 0 0 0 - - - 0;
#X obj 24 170 outlet;
#X floatatom 109 44 5 0 1 0 - - - 0;
#X obj 109 22 r testnoise;
#X obj 27 20 inlet;
#X obj 27 45 random 10000;
#X obj 25 69 - 5000;
#X obj 26 95 / 5000;
#X obj 24 143 *;
#X connect 0 0 8 0;
#X connect 2 0 8 1;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 0 0;
#X connect 8 0 1 0;
#X restore 284 -2 pd noisy-sample-data;
#N canvas 915 317 450 300 graph 0;
#X obj 40 43 inlet;
#X obj 94 44 inlet;
#X obj 142 44 inlet;
#X obj 143 76 t f f;
#X obj 62 139 tabwrite original;
#X obj 25 174 tabwrite filtered;
#X connect 0 0 5 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 3 0 5 1;
#X connect 3 1 4 1;
#X restore 278 67 pd graph;
#N canvas 530 236 450 300 counter 0;
#X obj 131 68 int;
#X obj 206 64 + 1;
#X obj 234 65 % 200;
#X obj 124 40 inlet;
#X obj 127 118 outlet;
#X obj 159 68 t f f;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 0 1;
#X connect 3 0 0 0;
#X connect 5 0 4 0;
#X connect 5 1 1 0;
#X restore 344 43 pd counter;
#X obj 284 21 t f f b;
#X obj 429 -53 vsl 15 128 0 1 0 0 testnoise empty empty 0 -9 0 10 #00f8fc #000000 #000000 0 1;
#X obj 284 -67 loadbang;
#X obj 55 -67 cnv 15 200 160 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X floatatom 72 60 5 0 0 0 - - - 0;
#X msg 72 -35 analyze \$1;
#X obj 72 -57 tgl 15 0 empty empty empty 17 7 0 10 #00f8fc #000000 #000000 0 1;
#N canvas 963 550 951 489 settings 0;
#X obj 15 13 cnv 15 500 180 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X msg 59 138 mean \$1;
#X msg 59 110 noise \$1;
#X msg 59 74 iterations \$1;
#X msg 59 46 analyze \$1;
#X obj 59 20 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 59 166 s \$0-kalman;
#X floatatom 22 59 5 1 100 0 - - - 0;
#X floatatom 22 94 5 0 1 0 - - - 0;
#X floatatom 22 121 5 0 1 0 - - - 0;
#X text 82 17 toggle analysis mode;
#X text 129 38 analyzes incoming data for mean and noise covariance;
#X text 131 51 and sets those values upon receiving [analyze 0(;
#X text 152 75 sets number of iterations of Kalman algorithm;
#X text 152 88 higher is more CPU intensive but potentially more accurate;
#X text 132 108 noise covariance - estimate of the amount of noise in data;
#X text 133 136 data mean - estimate of the mean value of the incoming data;
#X connect 1 0 6 0;
#X connect 2 0 6 0;
#X connect 3 0 6 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 7 0 3 0;
#X connect 8 0 2 0;
#X connect 9 0 1 0;
#X restore 174 -29 pd settings;
#X obj 72 -10 r \$0-kalman;
#X text 95 -59 <-- toggle analysis mode;
#X text 408 77 noisiness;
#X obj 51 108 cnv 15 400 220 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X text 159 113 LINEAR 1-DIMENSIONAL KALMAN FILTER;
#X obj 60 22 cnv 15 70 30 empty empty empty 20 12 0 14 #fcfcc4 #404040 0;
#X floatatom 267 44 5 0 0 0 - - - 0;
#X text 58 306 http://en.wikipedia.org/wiki/Kalman_filter;
#X text 58 291 http://bilgin.esme.org/BitsBytes/KalmanFilterforDummies.aspx;
#X text 163 128 Predictive recursive estimator;
#X text 69 149 The full Kalman filter is a very complex algorithm \, but for;
#X text 70 163 most purposes we can use a simplified version with effective;
#X text 70 177 results.;
#X text 70 192 Analysis mode allows the filter to estimate initial;
#X text 70 207 conditions \, increasing efficiency by allowing the user to;
#X text 70 222 reduce the number of iterations. By default the algorithm;
#X text 71 237 performs 30 recursive iterations for every new piece of data;
#X text 71 252 but accurate mean and noise covariance values allow the user;
#X text 71 267 to reduce it to 10 or less. See [pd settings] for info;
#X msg 390 -50 0.2;
#X floatatom 217 70 5 0 0 0 - - - 0;
#X text 158 70 error amt;
#X obj 563 94 declare -lib pd-neimog;
#X obj 72 28 kalman;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 8 0;
#X connect 7 0 6 2;
#X connect 8 0 22 0;
#X connect 8 1 6 1;
#X connect 8 2 7 0;
#X connect 10 0 4 0;
#X connect 10 0 35 0;
#X connect 12 0 6 0;
#X connect 13 0 39 0;
#X connect 14 0 13 0;
#X connect 16 0 39 0;
#X connect 22 0 39 0;
#X connect 35 0 9 0;
#X connect 39 0 12 0;
#X connect 39 1 36 0;
